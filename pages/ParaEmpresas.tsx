import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { Sparkles, Calculator, CheckCircle, TrendingDown, Shield, Clock, Building2, ArrowRight, Loader2, AlertCircle, FileText, FileSignature, Settings } from 'lucide-react';
import { LOGO_URL } from '../constants';
import { LeadService } from '../services/supabase';
const ParaEmpresas: React.FC = () => {
  const [formData, setFormData] = useState({ nome_completo: "", email: "", telefone: "", empresa: "", cnpj: "", consumo_mensal_kwh: "", valor_conta_atual: "", cidade: "", estado: "" });
  const [loading, setLoading] = useState(false);
  const [economia, setEconomia] = useState<{ mensal: number; anual: number; percentual: number } | null>(null);
  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error'>('idle');
  const [errorMessage, setErrorMessage] = useState('');
  const calcularEconomia = () => { const valor = parseFloat(formData.valor_conta_atual); if (!valor) return null; const economiaMedia = (valor * 0.25 + valor * 0.30) / 2; return { mensal: economiaMedia, anual: economiaMedia * 12, percentual: 27.5 }; };
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault(); setLoading(true); setErrorMessage(''); setSubmitStatus('idle');
    try {
      const economiaDados = calcularEconomia();
      const detailsMessage = `SOLICITAÇÃO PARA EMPRESAS\n-------------------------\nCNPJ: ${formData.cnpj}\nConsumo: ${formData.consumo_mensal_kwh} kWh\nValor Atual: R$ ${formData.valor_conta_atual}\nLocal: ${formData.cidade}/${formData.estado}\nEconomia Estimada: R$ ${economiaDados?.mensal.toFixed(2)}`;
      const result = await LeadService.create({ name: formData.nome_completo, email: formData.email, phone: formData.telefone, company: formData.empresa, message: detailsMessage });
      if (result.success) { setEconomia(economiaDados); setSubmitStatus('success'); setFormData({ nome_completo: "", email: "", telefone: "", empresa: "", cnpj: "", consumo_mensal_kwh: "", valor_conta_atual: "", cidade: "", estado: "" }); } else { setSubmitStatus('error'); setErrorMessage(result.error || 'Erro desconhecido.'); }
    } catch (error: any) { setSubmitStatus('error'); setErrorMessage(error.message || 'Erro de conexão.'); } finally { setLoading(false); }
  };
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => { setFormData({ ...formData, [e.target.id]: e.target.value }); };
  const scrollToForm = () => { document.getElementById('form-section')?.scrollIntoView({ behavior: 'smooth' }); };
  const timelineSteps = [ { icon: FileText, title: "Diagnóstico Inicial", description: "Análise completa da conta", duration: "1-2 dias" }, { icon: Calculator, title: "Cálculo de Viabilidade", description: "Simulação precisa da economia", duration: "1 dia" }, { icon: CheckCircle, title: "Habilitação CCEE", description: "Registro na Câmara", duration: "15-30 dias" }, { icon: FileSignature, title: "Negociação", description: "Busca dos melhores preços", duration: "5-10 dias" }, { icon: TrendingDown, title: "Migração Completa", description: "Transição segura", duration: "1 dia" }, { icon: Settings, title: "Gestão Contínua", description: "Acompanhamento mensal", duration: "Permanente" } ];
  return (
    <div className="min-h-screen bg-slate-950">
      <section className="relative py-20 overflow-hidden"> <div className="absolute inset-0"> <div className="absolute top-0 left-0 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl animate-pulse" /> </div> <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> <div className="grid lg:grid-cols-2 gap-12 items-center"> <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }}> <div className="inline-flex items-center gap-2 px-4 py-2 bg-emerald-500/10 border border-emerald-500/30 rounded-full mb-6 backdrop-blur-sm"> <Sparkles className="w-4 h-4 text-emerald-400" /> <span className="text-emerald-400 text-lg font-semibold">Para Empresas</span> </div> <h1 className="text-5xl lg:text-6xl font-display font-extrabold mb-6 text-white leading-tight"> Economize até <span className="bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent">30%</span> na Conta de Energia </h1> <p className="text-slate-300 mb-8 text-xl leading-relaxed"> Sem investimento inicial. Sem riscos. Só economia garantida desde o primeiro mês. </p> </motion.div> <motion.div initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} className="relative hidden lg:flex items-center justify-center"> <img src={LOGO_URL} alt="MIGREI" className="relative w-96 h-96 object-contain drop-shadow-2xl" /> </motion.div> </div> </div> </section>
      <section className="py-24 bg-slate-950 border-t border-slate-800"> <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} className="text-center mb-16"> <h2 className="text-3xl md:text-5xl font-display font-extrabold text-white mb-4 leading-tight"> <span className="bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent">Processo Completo</span> de Migração </h2> </motion.div> <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"> {timelineSteps.map((step, index) => ( <motion.div key={index} initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} className="bg-gradient-to-b from-slate-900 to-slate-950 p-8 rounded-2xl border border-slate-800 shadow-[0_0_20px_rgba(249,115,22,0.05)] hover:border-orange-500/30 transition-all"> <div className="relative z-10"> <div className="w-14 h-14 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 rounded-xl flex items-center justify-center mb-6 border border-yellow-500/20"> <step.icon className="w-7 h-7 text-yellow-400" /> </div> <h3 className="text-xl font-bold text-white mb-3">{step.title}</h3> <p className="text-slate-400 text-sm mb-6 min-h-[40px] leading-relaxed">{step.description}</p> <div className="inline-flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-emerald-400 bg-emerald-500/10 px-3 py-1.5 rounded-full border border-emerald-500/20"> <Clock className="w-3 h-3" /> {step.duration} </div> </div> </motion.div> ))} </div> <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }} className="mt-16 text-center space-y-8"> <div className="inline-flex items-center gap-2 px-6 py-3 bg-emerald-500/10 border-2 border-emerald-500/30 rounded-full backdrop-blur-sm"> <CheckCircle className="w-5 h-5 text-emerald-400" /> <span className="font-semibold text-emerald-400 text-sm md:text-base"> Processo completo: 30-45 dias • Economia: Permanente </span> </div> </motion.div> </div> </section>
      <section id="form-section" className="py-24 bg-slate-950 border-t border-slate-800"> <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"> <motion.div initial={{ opacity: 0, y: 20 }} whileInView={{ opacity: 1, y: 0 }}> <div className="bg-slate-900 border border-emerald-500/20 rounded-3xl shadow-2xl overflow-hidden relative"> <div className="bg-gradient-to-r from-emerald-600 to-cyan-600 text-white p-6 md:p-8"> <h2 className="text-2xl font-bold flex items-center gap-3 mb-2"> <Calculator className="w-8 h-8" /> Calcule Sua Economia Agora </h2> <p className="text-emerald-50 text-lg"> Preencha os dados abaixo e descubra quanto sua empresa pode economizar </p> </div> <div className="p-8"> {submitStatus === 'success' && economia ? ( <motion.div initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} className="p-8 bg-emerald-900/10 rounded-2xl border border-emerald-500/30"> <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"> <div className="text-center p-6 bg-slate-950 rounded-xl border border-emerald-500/20"> <div className="text-3xl font-bold text-emerald-400"> R$ {economia.mensal.toLocaleString('pt-BR', { maximumFractionDigits: 0 })} </div> <div className="text-sm font-bold text-slate-500 uppercase tracking-wide mt-1">Por Mês</div> </div> </div> <div className="text-center"> <button onClick={() => setSubmitStatus('idle')} className="text-emerald-500 hover:text-emerald-400 font-bold underline transition-colors"> Fazer nova simulação </button> </div> </motion.div> ) : ( <form onSubmit={handleSubmit} className="space-y-6"> {submitStatus === 'error' && <div className="text-red-500 text-sm">{errorMessage}</div>} <div className="grid grid-cols-1 md:grid-cols-2 gap-6"> <div className="space-y-2"> <label className="text-slate-400 text-xs font-bold uppercase">Nome Completo *</label> <input id="nome_completo" required value={formData.nome_completo} onChange={handleChange} className="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white" /> </div> <div className="space-y-2"> <label className="text-slate-400 text-xs font-bold uppercase">Email Corporativo *</label> <input id="email" type="email" required value={formData.email} onChange={handleChange} className="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white" /> </div> <div className="space-y-2"> <label className="text-slate-400 text-xs font-bold uppercase">Telefone *</label> <input id="telefone" required value={formData.telefone} onChange={handleChange} className="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white" /> </div> <div className="space-y-2"> <label className="text-slate-400 text-xs font-bold uppercase">CNPJ</label> <input id="cnpj" value={formData.cnpj} onChange={handleChange} className="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white" /> </div> <div className="col-span-1 md:col-span-2 space-y-2"> <label className="text-slate-400 text-xs font-bold uppercase">Valor Médio da Conta (R$) *</label> <input id="valor_conta_atual" type="number" required value={formData.valor_conta_atual} onChange={handleChange} className="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-4 text-lg text-white" /> </div> </div> <button type="submit" disabled={loading} className="w-full bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white font-bold text-lg py-4 rounded-xl shadow-lg mt-8"> {loading ? <Loader2 className="w-5 h-5 animate-spin mx-auto" /> : "Calcular Minha Economia"} </button> </form> )} </div> </div> </motion.div> </div> </section>
    </div>
  );
};
export default ParaEmpresas;